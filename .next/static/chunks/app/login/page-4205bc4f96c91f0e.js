(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{2015:function(e,t,s){Promise.resolve().then(s.bind(s,2255))},2255:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var a=s(3827),r=s(4090),l=s(3411),n=s.n(l),i=s(7907),o=s(6943),d=s(473),c=s(9859),u=s(3688),x=s(20);let m=(0,x.Z)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),f=(0,x.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),h=(0,x.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),b=(0,x.Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);function p(){let e=(0,i.useRouter)(),[t,s]=(0,r.useState)(!1),[l,x]=(0,r.useState)(!1),[p,v]=(0,r.useState)(""),[j,g]=(0,r.useState)(""),[y,w]=(0,r.useState)(""),N=async t=>{t.preventDefault(),s(!0);try{if(l){let{data:e,error:t}=await o.supabase.auth.signUp({email:p,password:j,options:{data:{username:y,full_name:y,avatar_url:"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(y)}}});if(t)throw t;await n().fire({title:"ลงทะเบียนสำเร็จ!",text:"กรุณาตรวจสอบอีเมลเพื่อยืนยันตัวตน",icon:"success",confirmButtonText:"ตกลง",confirmButtonColor:"#0f172a"}),x(!1)}else{let{data:t,error:s}=await o.supabase.auth.signInWithPassword({email:p,password:j});if(s)throw s;n().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",n().stopTimer),e.addEventListener("mouseleave",n().resumeTimer)}}).fire({icon:"success",title:"เข้าสู่ระบบสำเร็จ"}),e.push("/"),e.refresh()}}catch(i){console.error("Auth Error:",i);let e="เกิดข้อผิดพลาด",t=i.message,s="error",a=!1,r="ลองใหม่",l="ยกเลิก";i.message.includes("Invalid login credentials")?(e="เข้าสู่ระบบไม่สำเร็จ",t="ไม่พบบัญชีผู้ใช้ หรือรหัสผ่านไม่ถูกต้อง\nคุณลงทะเบียนหรือยัง?",s="warning",r="สมัครสมาชิกเลย",l="ลองใหม่อีกครั้ง",a=!0):i.message.includes("User already registered")&&(e="บัญชีนี้มีอยู่แล้ว",t="อีเมลนี้ถูกใช้งานแล้ว กรุณาเข้าสู่ระบบ",s="info",r="เข้าสู่ระบบ",a=!1),n().fire({title:e,text:t,icon:s,showCancelButton:a,confirmButtonText:r,cancelButtonText:l,confirmButtonColor:"#0f172a",cancelButtonColor:"#94a3b8"}).then(e=>{e.isConfirmed&&(i.message.includes("Invalid login credentials")?x(!0):i.message.includes("User already registered")&&x(!1))})}finally{s(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-[#fffbf0] font-sans selection:bg-amber-200 selection:text-slate-900",children:[(0,a.jsx)(d.default,{}),(0,a.jsx)("div",{className:"max-w-md mx-auto px-4 py-8 md:py-20 mt-20 md:mt-0",children:(0,a.jsxs)("div",{className:"bg-white p-8 rounded-xl border-4 border-slate-900 shadow-[8px_8px_0px_0px_rgba(251,191,36,1)]",children:[(0,a.jsxs)("h2",{className:"text-3xl font-black text-slate-900 mb-2 flex items-center gap-2",children:[l?(0,a.jsx)(u.Z,{size:32,className:"text-amber-500"}):(0,a.jsx)(m,{size:32,className:"text-amber-500"}),l?"สมัครสมาชิก":"เข้าสู่ระบบ"]}),(0,a.jsx)("p",{className:"text-slate-500 mb-6 font-medium",children:l?"เข้าร่วมแก๊งคนดวงตกได้แล้ววันนี้":"กลับมาแชร์ความพังกันต่อเถอะ"}),(0,a.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[l&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Username"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.Z,{className:"absolute left-3 top-3 text-slate-400",size:20}),(0,a.jsx)("input",{type:"text",value:y,onChange:e=>w(e.target.value),className:"w-full pl-10 p-3 border-2 border-slate-300 rounded-lg focus:border-slate-900 focus:outline-none bg-slate-50 font-medium",placeholder:"ตั้งชื่อเท่ๆ",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Email"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f,{className:"absolute left-3 top-3 text-slate-400",size:20}),(0,a.jsx)("input",{type:"email",value:p,onChange:e=>v(e.target.value),className:"w-full pl-10 p-3 border-2 border-slate-300 rounded-lg focus:border-slate-900 focus:outline-none bg-slate-50 font-medium",placeholder:"name@example.com",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(h,{className:"absolute left-3 top-3 text-slate-400",size:20}),(0,a.jsx)("input",{type:"password",value:j,onChange:e=>g(e.target.value),className:"w-full pl-10 p-3 border-2 border-slate-300 rounded-lg focus:border-slate-900 focus:outline-none bg-slate-50 font-medium",placeholder:"••••••••",required:!0})]})]}),(0,a.jsxs)("button",{type:"submit",disabled:t,className:"w-full bg-slate-900 text-amber-400 font-bold py-3 rounded-lg border-2 border-transparent hover:border-amber-400 shadow-lg transform active:scale-95 transition-transform flex justify-center items-center gap-2 group",children:[t?"กำลังโหลด...":l?"สมัครสมาชิก":"เข้าสู่ระบบ",!t&&(0,a.jsx)(b,{size:20,className:"group-hover:translate-x-1 transition-transform"})]})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsxs)("p",{className:"text-slate-600 text-sm font-medium",children:[l?"มีบัญชีอยู่แล้ว?":"ยังไม่มีบัญชี?",(0,a.jsx)("button",{onClick:()=>x(!l),className:"ml-2 text-slate-900 font-bold underline decoration-amber-400 decoration-2 underline-offset-2 hover:text-amber-600",children:l?"เข้าสู่ระบบ":"สมัครสมาชิกใหม่"})]})})]})}),(0,a.jsx)(c.Z,{})]})}},9859:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(3827),r=s(8792);function l(){return(0,a.jsx)("footer",{className:"hidden md:block bg-slate-900 text-slate-400 py-12 border-t-8 border-amber-400",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 text-center flex flex-col md:flex-row justify-between items-center gap-4",children:[(0,a.jsx)("p",{children:"\xa9 2024 Prasobpai. All wrongs reserved."}),(0,a.jsxs)("div",{className:"flex flex-wrap justify-center gap-6 text-sm font-medium",children:[(0,a.jsx)(r.default,{href:"/about",className:"hover:text-amber-400 transition-colors",children:"เกี่ยวกับเรา"}),(0,a.jsx)(r.default,{href:"/",className:"hover:text-amber-400 transition-colors",children:"รวมเรื่องซวยรายวัน"}),(0,a.jsx)(r.default,{href:"/",className:"hover:text-amber-400 transition-colors",children:"บทความแนะนำ"}),(0,a.jsx)(r.default,{href:"/privacy",className:"hover:text-amber-400 transition-colors",children:"นโยบายความเป็นส่วนตัว"})]})]})})}},473:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a=s(3827),r=s(4090),l=s(8792),n=s(7907),i=s(6943),o=s(9628),d=s(3688),c=s(6942),u=s(8198),x=s(4116),m=s(2677),f=s(1705);function h(){var e,t,s;let[h,b]=(0,r.useState)(!0),[p,v]=(0,r.useState)(0),[j,g]=(0,r.useState)(null),y=(0,n.usePathname)();(0,r.useEffect)(()=>{i.supabase.auth.getSession().then(e=>{var t;let{data:{session:s}}=e;g(null!==(t=null==s?void 0:s.user)&&void 0!==t?t:null)});let{data:{subscription:e}}=i.supabase.auth.onAuthStateChange((e,t)=>{var s;g(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null)});return()=>e.unsubscribe()},[]);let w=async()=>{await i.supabase.auth.signOut(),window.location.href="/login"};return(0,r.useEffect)(()=>{let e=()=>{let e=window.scrollY;e>p&&e>50?b(!1):b(!0),v(e)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[p]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("nav",{className:"hidden md:block sticky top-0 z-50 bg-slate-900 text-white shadow-lg border-b-4 border-amber-400",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)(l.default,{href:"/",className:"flex items-center space-x-2 cursor-pointer transform hover:-rotate-2 transition-transform",children:[(0,a.jsx)("div",{className:"bg-amber-400 text-slate-900 p-2 rounded-lg font-black text-xl border-2 border-white",children:"PRASOBPAI"}),(0,a.jsx)("span",{className:"font-bold text-lg text-amber-100",children:"ประสบภัย.คอม"})]}),(0,a.jsxs)("div",{className:"flex space-x-6 items-center",children:[(0,a.jsx)(l.default,{href:"/",className:"hover:text-amber-400 font-medium ".concat("/"===y?"text-amber-400 underline decoration-wavy underline-offset-4":""),children:"ศูนย์บรรเทาทุกข์"}),(0,a.jsx)(l.default,{href:"/submit",className:"hover:text-amber-400 font-medium ".concat("/submit"===y?"text-amber-400 underline decoration-wavy underline-offset-4":""),children:"แจ้งเหตุฉุกเฉิน"}),(0,a.jsx)(l.default,{href:"/about",className:"hover:text-amber-400 font-medium ".concat("/about"===y?"text-amber-400 underline decoration-wavy underline-offset-4":""),children:"เกี่ยวกับเรา"}),j?(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(l.default,{href:"/profile/edit",className:"flex items-center gap-2 hover:text-amber-400",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-700 border border-white flex items-center justify-center overflow-hidden",children:(0,a.jsx)("img",{src:(null===(e=j.user_metadata)||void 0===e?void 0:e.avatar_url)||"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(j.email),alt:"Profile"})}),(0,a.jsx)("span",{className:"text-sm font-medium",children:(null===(t=j.user_metadata)||void 0===t?void 0:t.username)||"User"})]}),(0,a.jsx)("button",{onClick:w,className:"text-red-400 hover:text-red-300",title:"Logout",children:(0,a.jsx)(o.Z,{size:20})})]}):(0,a.jsx)(l.default,{href:"/login",className:"bg-white text-slate-900 px-4 py-2 rounded-lg font-bold hover:bg-amber-400 transition-colors",children:"เข้าสู่ระบบ"})]})]})})}),(0,a.jsxs)("div",{className:"md:hidden fixed top-0 left-0 right-0 z-50 transition-transform duration-300 ".concat(h?"translate-y-0":"-translate-y-full"),children:[(0,a.jsxs)("div",{className:"bg-slate-900 text-white px-4 py-3 flex justify-between items-center shadow-md",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:j?(0,a.jsx)(l.default,{href:"/profile/edit",children:(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-700 border border-slate-500 flex items-center justify-center overflow-hidden",children:(0,a.jsx)("img",{src:(null===(s=j.user_metadata)||void 0===s?void 0:s.avatar_url)||"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(j.email),alt:"Profile"})})}):(0,a.jsx)(l.default,{href:"/login",children:(0,a.jsx)(d.Z,{className:"text-amber-400"})})}),(0,a.jsx)("div",{className:"font-black text-lg text-amber-400 tracking-wide",children:"PRASOBPAI"}),(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsx)(c.Z,{size:22,className:"text-white"})})]}),(0,a.jsx)("div",{className:"bg-slate-800 text-slate-300 px-2 py-2 overflow-x-auto no-scrollbar flex items-center gap-6 shadow-lg",children:["ภาพรวม","ประสบการณ์","เกร็ดความรู้","แลกเครดิตความซวย","ร้านค้าแก้เคล็ด"].map((e,t)=>(0,a.jsx)("span",{className:"whitespace-nowrap text-sm font-medium px-2 pb-1 border-b-2 ".concat(0===t?"text-amber-400 border-amber-400":"border-transparent"),children:e},t))})]}),(0,a.jsxs)("div",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-slate-200 px-4 py-2 flex justify-between items-end shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] pb-safe",children:[(0,a.jsxs)(l.default,{href:"/",className:"flex flex-col items-center gap-1 w-1/5 ".concat("/"===y?"text-slate-900":"text-slate-400"),children:[(0,a.jsx)(u.Z,{size:24,strokeWidth:"/"===y?3:2}),(0,a.jsx)("span",{className:"text-[10px] font-bold",children:"หน้าแรก"})]}),(0,a.jsxs)("button",{className:"flex flex-col items-center gap-1 w-1/5 text-slate-400 hover:text-slate-900",children:[(0,a.jsx)(x.Z,{size:24}),(0,a.jsx)("span",{className:"text-[10px] font-bold",children:"บอร์ด"})]}),(0,a.jsxs)("div",{className:"relative w-1/5 flex justify-center",children:[(0,a.jsx)(l.default,{href:"/submit",className:"absolute -top-8 bg-slate-900 text-amber-400 p-4 rounded-full shadow-lg border-4 border-white transform hover:scale-105 transition-transform",children:(0,a.jsx)(m.Z,{size:28,strokeWidth:3})}),(0,a.jsx)("span",{className:"text-[10px] font-bold mt-8 text-slate-900",children:"โพสต์"})]}),(0,a.jsxs)("button",{className:"flex flex-col items-center gap-1 w-1/5 text-slate-400 hover:text-slate-900",children:[(0,a.jsx)(f.Z,{size:24}),(0,a.jsx)("span",{className:"text-[10px] font-bold",children:"แจ้งเตือน"})]}),(0,a.jsxs)(l.default,{href:"/profile/edit",className:"flex flex-col items-center gap-1 w-1/5 ".concat("/profile/edit"===y?"text-slate-900":"text-slate-400"),children:[(0,a.jsx)(d.Z,{size:24,strokeWidth:"/profile/edit"===y?3:2}),(0,a.jsx)("span",{className:"text-[10px] font-bold",children:"ฉัน"})]})]})]})}},6943:function(e,t,s){"use strict";s.r(t),s.d(t,{supabase:function(){return n}});var a=s(2066);let r="https://dpkktxiiavunivqvkdol.supabase.co",l="sb_publishable_IP-OB42MoH1AMIhVS8wX-Q_Sr6btW_1";if(!r||!l)throw Error("Missing Supabase Environment Variables");let n=(0,a.eI)(r,l)},7907:function(e,t,s){"use strict";var a=s(5313);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},1705:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(20).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},4116:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(20).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},8198:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(20).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},9628:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(20).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},2677:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(20).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6942:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(20).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},3688:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(20).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},function(e){e.O(0,[461,66,862,971,69,744],function(){return e(e.s=2015)}),_N_E=e.O()}]);