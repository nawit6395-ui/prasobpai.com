"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/view/route";
exports.ids = ["app/api/view/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fview%2Froute&page=%2Fapi%2Fview%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fview%2Froute.js&appDir=C%3A%5CUsers%5C%E0%B8%93%E0%B8%A7%E0%B8%B4%E0%B8%98%E0%B8%9A%E0%B8%B8%E0%B8%8D%E0%B8%A2%E0%B8%B0%E0%B8%A3%E0%B8%B1%E0%B8%95%E0%B8%99%E0%B9%8C%5CDesktop%5CNext.js%5C4.Prasobpai%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5C%E0%B8%93%E0%B8%A7%E0%B8%B4%E0%B8%98%E0%B8%9A%E0%B8%B8%E0%B8%8D%E0%B8%A2%E0%B8%B0%E0%B8%A3%E0%B8%B1%E0%B8%95%E0%B8%99%E0%B9%8C%5CDesktop%5CNext.js%5C4.Prasobpai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fview%2Froute&page=%2Fapi%2Fview%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fview%2Froute.js&appDir=C%3A%5CUsers%5C%E0%B8%93%E0%B8%A7%E0%B8%B4%E0%B8%98%E0%B8%9A%E0%B8%B8%E0%B8%8D%E0%B8%A2%E0%B8%B0%E0%B8%A3%E0%B8%B1%E0%B8%95%E0%B8%99%E0%B9%8C%5CDesktop%5CNext.js%5C4.Prasobpai%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5C%E0%B8%93%E0%B8%A7%E0%B8%B4%E0%B8%98%E0%B8%9A%E0%B8%B8%E0%B8%8D%E0%B8%A2%E0%B8%B0%E0%B8%A3%E0%B8%B1%E0%B8%95%E0%B8%99%E0%B9%8C%5CDesktop%5CNext.js%5C4.Prasobpai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Desktop_Next_js_4_Prasobpai_app_api_view_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/view/route.js */ \"(rsc)/./app/api/view/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/view/route\",\n        pathname: \"/api/view\",\n        filename: \"route\",\n        bundlePath: \"app/api/view/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\ณวิธบุญยะรัตน์\\\\Desktop\\\\Next.js\\\\4.Prasobpai\\\\app\\\\api\\\\view\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_Desktop_Next_js_4_Prasobpai_app_api_view_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/view/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ2aWV3JTJGcm91dGUmcGFnZT0lMkZhcGklMkZ2aWV3JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGdmlldyUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUMlRTAlQjglOTMlRTAlQjglQTclRTAlQjglQjQlRTAlQjglOTglRTAlQjglOUElRTAlQjglQjglRTAlQjglOEQlRTAlQjglQTIlRTAlQjglQjAlRTAlQjglQTMlRTAlQjglQjElRTAlQjglOTUlRTAlQjglOTklRTAlQjklOEMlNUNEZXNrdG9wJTVDTmV4dC5qcyU1QzQuUHJhc29icGFpJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUMlRTAlQjglOTMlRTAlQjglQTclRTAlQjglQjQlRTAlQjglOTglRTAlQjglOUElRTAlQjglQjglRTAlQjglOEQlRTAlQjglQTIlRTAlQjglQjAlRTAlQjglQTMlRTAlQjglQjElRTAlQjglOTUlRTAlQjglOTklRTAlQjklOEMlNUNEZXNrdG9wJTVDTmV4dC5qcyU1QzQuUHJhc29icGFpJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2tDO0FBQy9HO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDNko7O0FBRTdKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhc29icGFpLXdlYi8/YmY2MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFzguJPguKfguLTguJjguJrguLjguI3guKLguLDguKPguLHguJXguJnguYxcXFxcRGVza3RvcFxcXFxOZXh0LmpzXFxcXDQuUHJhc29icGFpXFxcXGFwcFxcXFxhcGlcXFxcdmlld1xcXFxyb3V0ZS5qc1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdmlldy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3ZpZXdcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3ZpZXcvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFzguJPguKfguLTguJjguJrguLjguI3guKLguLDguKPguLHguJXguJnguYxcXFxcRGVza3RvcFxcXFxOZXh0LmpzXFxcXDQuUHJhc29icGFpXFxcXGFwcFxcXFxhcGlcXFxcdmlld1xcXFxyb3V0ZS5qc1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS92aWV3L3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fview%2Froute&page=%2Fapi%2Fview%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fview%2Froute.js&appDir=C%3A%5CUsers%5C%E0%B8%93%E0%B8%A7%E0%B8%B4%E0%B8%98%E0%B8%9A%E0%B8%B8%E0%B8%8D%E0%B8%A2%E0%B8%B0%E0%B8%A3%E0%B8%B1%E0%B8%95%E0%B8%99%E0%B9%8C%5CDesktop%5CNext.js%5C4.Prasobpai%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5C%E0%B8%93%E0%B8%A7%E0%B8%B4%E0%B8%98%E0%B8%9A%E0%B8%B8%E0%B8%8D%E0%B8%A2%E0%B8%B0%E0%B8%A3%E0%B8%B1%E0%B8%95%E0%B8%99%E0%B9%8C%5CDesktop%5CNext.js%5C4.Prasobpai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/view/route.js":
/*!*******************************!*\
  !*** ./app/api/view/route.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/esm/wrapper.mjs\");\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\n// Initialize Supabase Admin client (to bypass RLS for checking/updating views)\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(\"https://dpkktxiiavunivqvkdol.supabase.co\", process.env.SUPABASE_SERVICE_ROLE_KEY || \"sb_publishable_IP-OB42MoH1AMIhVS8wX-Q_Sr6btW_1\");\nasync function POST(request) {\n    try {\n        const { story_id } = await request.json();\n        if (!story_id) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Story ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        // 1. Get User Identity (IP or User ID)\n        // IP Address\n        let ip = request.headers.get(\"x-forwarded-for\") || \"127.0.0.1\";\n        if (ip.includes(\",\")) ip = ip.split(\",\")[0];\n        // Hash IP for basic privacy\n        const ipHash = crypto__WEBPACK_IMPORTED_MODULE_1___default().createHash(\"md5\").update(ip).digest(\"hex\");\n        // Check for User ID (if sent in body or headers - usually we decode JWT but let's stick to IP + optional ID from body if needed)\n        // Ideally we verify the session token here.\n        // For simplicity: We will rely heavily on IP which is the main requirement \"IP or User ID\".\n        // 2. Check 24-hour window\n        // Calculate timestamp for 24 hours ago\n        const twentyFourHoursAgo = new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString();\n        // Query: Has this IP viewed this story in the last 24H?\n        const { data: recentViews, error: checkError } = await supabaseAdmin.from(\"story_views\").select(\"id\").eq(\"story_id\", story_id).eq(\"ip_hash\", ipHash).gte(\"viewed_at\", twentyFourHoursAgo).limit(1);\n        if (checkError) {\n            console.error(\"Check Error:\", checkError);\n        // Fail gracefully (don't recount?) or allow? Let's allow but log error.\n        }\n        // 3. Logic: If found, DO NOTHING\n        if (recentViews && recentViews.length > 0) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                message: \"View already counted in 24h\"\n            }, {\n                status: 200\n            });\n        }\n        // 4. If NOT found: Recording View\n        // A. Insert into story_views\n        const { error: insertError } = await supabaseAdmin.from(\"story_views\").insert({\n            story_id: story_id,\n            ip_hash: ipHash\n        });\n        if (insertError) {\n            console.error(\"Insert Error:\", insertError);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Failed to record view\"\n            }, {\n                status: 500\n            });\n        }\n        // B. Increment Story Counter\n        // We use the RPC function we created earlier\n        const { error: incrementError } = await supabaseAdmin.rpc(\"increment_view_count\", {\n            story_id: story_id\n        });\n        if (incrementError) {\n            console.error(\"Increment Error:\", incrementError);\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            message: \"View counted successfully\"\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"API Error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Internal Server Error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y2s6Ly9wcmFzb2JwYWktd2ViLy4vYXBwL2FwaS92aWV3L3JvdXRlLmpzPzhkOWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcclxuaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5pbXBvcnQgY3J5cHRvIGZyb20gJ2NyeXB0byc7XHJcblxyXG4vLyBJbml0aWFsaXplIFN1cGFiYXNlIEFkbWluIGNsaWVudCAodG8gYnlwYXNzIFJMUyBmb3IgY2hlY2tpbmcvdXBkYXRpbmcgdmlld3MpXHJcbmNvbnN0IHN1cGFiYXNlQWRtaW4gPSBjcmVhdGVDbGllbnQoXHJcbiAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwsXHJcbiAgICBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIHx8IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZXHJcbiAgICAvLyBXQVJOOiBJZGVhbGx5IHVzZSBTRVJWSUNFX1JPTEVfS0VZIGZvciBiYWNrZW5kIGxvZ2ljLCBidXQgaWYgbm90IHNldCBpbiBsb2NhbGwsIGZhbGxiYWNrIHRvIGFub24gKFJMUyBtaWdodCBibG9jaykuXHJcbiAgICAvLyBUaGUgdXNlciBoYXMgLmVudi5sb2NhbCwgSSBzaG91bGQgY2hlY2sgaWYgdGhleSBjYW4gYWRkIFNFUlZJQ0VfS0VZIG9yIGlmIEkgc2hvdWxkIGFidXNlIFJMUy5cclxuICAgIC8vIEZvciBub3csIGxldCdzIGFzc3VtZSBBbm9uIGtleSBpcyBlbm91Z2ggSUYgdGhlIGxvZ2ljIGlzIGp1c3QgY2hlY2tpbmcuXHJcbiAgICAvLyBBY3R1YWxseSwgdG8gdXBkYXRlIGB2aWV3X2NvdW50YCByZWxpYWJseSB3aXRob3V0IHJhY2UgY29uZGl0aW9ucywgUlBDIGlzIGJlc3QuXHJcbik7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHsgc3RvcnlfaWQgfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xyXG5cclxuICAgICAgICBpZiAoIXN0b3J5X2lkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnU3RvcnkgSUQgaXMgcmVxdWlyZWQnIH0sIHsgc3RhdHVzOiA0MDAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyAxLiBHZXQgVXNlciBJZGVudGl0eSAoSVAgb3IgVXNlciBJRClcclxuICAgICAgICAvLyBJUCBBZGRyZXNzXHJcbiAgICAgICAgbGV0IGlwID0gcmVxdWVzdC5oZWFkZXJzLmdldCgneC1mb3J3YXJkZWQtZm9yJykgfHwgJzEyNy4wLjAuMSc7XHJcbiAgICAgICAgaWYgKGlwLmluY2x1ZGVzKCcsJykpIGlwID0gaXAuc3BsaXQoJywnKVswXTtcclxuXHJcbiAgICAgICAgLy8gSGFzaCBJUCBmb3IgYmFzaWMgcHJpdmFjeVxyXG4gICAgICAgIGNvbnN0IGlwSGFzaCA9IGNyeXB0by5jcmVhdGVIYXNoKCdtZDUnKS51cGRhdGUoaXApLmRpZ2VzdCgnaGV4Jyk7XHJcblxyXG4gICAgICAgIC8vIENoZWNrIGZvciBVc2VyIElEIChpZiBzZW50IGluIGJvZHkgb3IgaGVhZGVycyAtIHVzdWFsbHkgd2UgZGVjb2RlIEpXVCBidXQgbGV0J3Mgc3RpY2sgdG8gSVAgKyBvcHRpb25hbCBJRCBmcm9tIGJvZHkgaWYgbmVlZGVkKVxyXG4gICAgICAgIC8vIElkZWFsbHkgd2UgdmVyaWZ5IHRoZSBzZXNzaW9uIHRva2VuIGhlcmUuXHJcbiAgICAgICAgLy8gRm9yIHNpbXBsaWNpdHk6IFdlIHdpbGwgcmVseSBoZWF2aWx5IG9uIElQIHdoaWNoIGlzIHRoZSBtYWluIHJlcXVpcmVtZW50IFwiSVAgb3IgVXNlciBJRFwiLlxyXG5cclxuICAgICAgICAvLyAyLiBDaGVjayAyNC1ob3VyIHdpbmRvd1xyXG4gICAgICAgIC8vIENhbGN1bGF0ZSB0aW1lc3RhbXAgZm9yIDI0IGhvdXJzIGFnb1xyXG4gICAgICAgIGNvbnN0IHR3ZW50eUZvdXJIb3Vyc0FnbyA9IG5ldyBEYXRlKERhdGUubm93KCkgLSAyNCAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpO1xyXG5cclxuICAgICAgICAvLyBRdWVyeTogSGFzIHRoaXMgSVAgdmlld2VkIHRoaXMgc3RvcnkgaW4gdGhlIGxhc3QgMjRIP1xyXG4gICAgICAgIGNvbnN0IHsgZGF0YTogcmVjZW50Vmlld3MsIGVycm9yOiBjaGVja0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgICAgICAgIC5mcm9tKCdzdG9yeV92aWV3cycpXHJcbiAgICAgICAgICAgIC5zZWxlY3QoJ2lkJylcclxuICAgICAgICAgICAgLmVxKCdzdG9yeV9pZCcsIHN0b3J5X2lkKVxyXG4gICAgICAgICAgICAuZXEoJ2lwX2hhc2gnLCBpcEhhc2gpXHJcbiAgICAgICAgICAgIC5ndGUoJ3ZpZXdlZF9hdCcsIHR3ZW50eUZvdXJIb3Vyc0FnbylcclxuICAgICAgICAgICAgLmxpbWl0KDEpO1xyXG5cclxuICAgICAgICBpZiAoY2hlY2tFcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDaGVjayBFcnJvcjonLCBjaGVja0Vycm9yKTtcclxuICAgICAgICAgICAgLy8gRmFpbCBncmFjZWZ1bGx5IChkb24ndCByZWNvdW50Pykgb3IgYWxsb3c/IExldCdzIGFsbG93IGJ1dCBsb2cgZXJyb3IuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyAzLiBMb2dpYzogSWYgZm91bmQsIERPIE5PVEhJTkdcclxuICAgICAgICBpZiAocmVjZW50Vmlld3MgJiYgcmVjZW50Vmlld3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiAnVmlldyBhbHJlYWR5IGNvdW50ZWQgaW4gMjRoJyB9LCB7IHN0YXR1czogMjAwIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gNC4gSWYgTk9UIGZvdW5kOiBSZWNvcmRpbmcgVmlld1xyXG4gICAgICAgIC8vIEEuIEluc2VydCBpbnRvIHN0b3J5X3ZpZXdzXHJcbiAgICAgICAgY29uc3QgeyBlcnJvcjogaW5zZXJ0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cclxuICAgICAgICAgICAgLmZyb20oJ3N0b3J5X3ZpZXdzJylcclxuICAgICAgICAgICAgLmluc2VydCh7XHJcbiAgICAgICAgICAgICAgICBzdG9yeV9pZDogc3RvcnlfaWQsXHJcbiAgICAgICAgICAgICAgICBpcF9oYXNoOiBpcEhhc2gsXHJcbiAgICAgICAgICAgICAgICAvLyB1c2VyX2lkOiB1c2VySWQgLy8gSWYgd2UgaGFkIGl0XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoaW5zZXJ0RXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignSW5zZXJ0IEVycm9yOicsIGluc2VydEVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gcmVjb3JkIHZpZXcnIH0sIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBCLiBJbmNyZW1lbnQgU3RvcnkgQ291bnRlclxyXG4gICAgICAgIC8vIFdlIHVzZSB0aGUgUlBDIGZ1bmN0aW9uIHdlIGNyZWF0ZWQgZWFybGllclxyXG4gICAgICAgIGNvbnN0IHsgZXJyb3I6IGluY3JlbWVudEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgICAgICAgIC5ycGMoJ2luY3JlbWVudF92aWV3X2NvdW50JywgeyBzdG9yeV9pZDogc3RvcnlfaWQgfSk7XHJcblxyXG4gICAgICAgIGlmIChpbmNyZW1lbnRFcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdJbmNyZW1lbnQgRXJyb3I6JywgaW5jcmVtZW50RXJyb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ1ZpZXcgY291bnRlZCBzdWNjZXNzZnVsbHknIH0sIHsgc3RhdHVzOiAyMDAgfSk7XHJcblxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdBUEkgRXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW50ZXJuYWwgU2VydmVyIEVycm9yJyB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gICAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJOZXh0UmVzcG9uc2UiLCJjcnlwdG8iLCJzdXBhYmFzZUFkbWluIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsIlBPU1QiLCJyZXF1ZXN0Iiwic3RvcnlfaWQiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJpcCIsImhlYWRlcnMiLCJnZXQiLCJpbmNsdWRlcyIsInNwbGl0IiwiaXBIYXNoIiwiY3JlYXRlSGFzaCIsInVwZGF0ZSIsImRpZ2VzdCIsInR3ZW50eUZvdXJIb3Vyc0FnbyIsIkRhdGUiLCJub3ciLCJ0b0lTT1N0cmluZyIsImRhdGEiLCJyZWNlbnRWaWV3cyIsImNoZWNrRXJyb3IiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJndGUiLCJsaW1pdCIsImNvbnNvbGUiLCJsZW5ndGgiLCJtZXNzYWdlIiwiaW5zZXJ0RXJyb3IiLCJpbnNlcnQiLCJpcF9oYXNoIiwiaW5jcmVtZW50RXJyb3IiLCJycGMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/view/route.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@supabase","vendor-chunks/next","vendor-chunks/tslib","vendor-chunks/iceberg-js"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fview%2Froute&page=%2Fapi%2Fview%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fview%2Froute.js&appDir=C%3A%5CUsers%5C%E0%B8%93%E0%B8%A7%E0%B8%B4%E0%B8%98%E0%B8%9A%E0%B8%B8%E0%B8%8D%E0%B8%A2%E0%B8%B0%E0%B8%A3%E0%B8%B1%E0%B8%95%E0%B8%99%E0%B9%8C%5CDesktop%5CNext.js%5C4.Prasobpai%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5C%E0%B8%93%E0%B8%A7%E0%B8%B4%E0%B8%98%E0%B8%9A%E0%B8%B8%E0%B8%8D%E0%B8%A2%E0%B8%B0%E0%B8%A3%E0%B8%B1%E0%B8%95%E0%B8%99%E0%B9%8C%5CDesktop%5CNext.js%5C4.Prasobpai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();