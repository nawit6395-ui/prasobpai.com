"use strict";(()=>{var e={};e.id=158,e.ids=[158],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9915:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>g,originalPathname:()=>f,patchFetch:()=>m,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>d,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>h});var o={};r.r(o),r.d(o,{POST:()=>u});var a=r(5419),s=r(9108),n=r(9678),i=r(8070);async function u(e){try{let{title:t,category:r}=await e.json();if(!t)return i.Z.json({error:"Title is required"},{status:400});let o="",a="";if(process.env.OPENAI_API_KEY)try{let e=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${process.env.OPENAI_API_KEY}`},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:`You are an SEO Specialist for a Thai community website named "Prasobpai".
                                Your task is to generate a clean, SEO-friendly URL slug from a Thai content title.
                                Rules:
                                1. Translate & Summarize intent to English.
                                2. NO Transliteration (Karaoke) - Strictly forbidden.
                                3. Format: lowercase, hyphens instead of spaces.
                                4. Length: under 60 chars.
                                5. Stop Words: Remove a, an, the, and, of, krub, ka.
                                Output ONLY the slug string.`},{role:"user",content:t}],max_tokens:50,temperature:.3})}),r=await e.json();r.choices&&r.choices[0]&&(a=r.choices[0].message.content.trim())}catch(e){console.error("OpenAI Error:",e)}if(!a){let e=[];for(let[r,o]of Object.entries({สบายดีครับ:"feeling-good",สบายดี:"feeling-good",เดินตกท่อ:"falling-drain-front-of-crush",ตกท่อ:"falling-drain",แอบชอบ:"crush",วันซวย:"epic-bad-day",ตกรถ:"missed-bus",ตกงาน:"fired",กาแฟ:"coffee",คาปูชิโน่:"cappuccino",ฝนตก:"rain",น้ำท่วม:"flood",รถเมล์:"bus",หวย:"lotto",กิน:"eat",แฟน:"relationship",เลิก:"breakup",เจ้านาย:"boss",ไล่ออก:"fired",ซวย:"bad-day",ผี:"ghost",รถชน:"car-crash",หมากัด:"dog-bite"}))t.includes(r)&&e.push(o);e.length>0&&(a=[...new Set(e)].join("-"))}a||(a=(r||"story").toLowerCase().replace(/\s+/g,"-")),a=a.toLowerCase().replace(/[^a-z0-9-]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");let s=Math.random().toString(16).substring(2,6);return o=`${a}-${s}`,i.Z.json({slug:o})}catch(e){return console.error("Slug Error:",e),i.Z.json({error:"Internal Server Error"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/slugify/route",pathname:"/api/slugify",filename:"route",bundlePath:"app/api/slugify/route"},resolvedPagePath:"C:\\Users\\ณวิธบุญยะรัตน์\\Desktop\\Next.js\\4.Prasobpai\\app\\api\\slugify\\route.js",nextConfigOutput:"",userland:o}),{requestAsyncStorage:c,staticGenerationAsyncStorage:p,serverHooks:d,headerHooks:g,staticGenerationBailout:h}=l,f="/api/slugify/route";function m(){return(0,n.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:p})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[638,206],()=>r(9915));module.exports=o})();